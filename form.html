<!DOCTYPE html>

<!-- // -->
<html lang="en" class="hydrated">

<head>

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.9.1/font/bootstrap-icons.min.css">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>


    <!-- <link rel="stylesheet" href="./assets/css/style.css"> -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"> -->

    <!-- 
    - google font link
  -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link
        href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;500;600;700&amp;family=Roboto:wght@400;500;700&amp;display=swap"
        rel="stylesheet">
    <!-- //sweetalert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


    <!-- 
    - preload banner
  -->
    <!-- <link rel="preload" href="./assets/images/hero-banner.png" as="image">  -->
    <link rel="stylesheet" href="./all.css">
    <link rel="stylesheet" href="./alll.css">



</head>

<body id="top">

    <main>
        <div class="formbold-form-wrapper">
            <div class="mb-20 flex align-items space-between">

                <div class="profile-icon" onclick="toggleDropdown()">
                    <span>P</span>
                    <div id="dropdown" class="dropdown-menu">
                        <a href="./index.html">Home</a>
                        <a href="#profile">Profile</a>
                        <a href="#settings">Settings</a>
                        <a href="#logout">Logout</a>
                    </div>
                </div>
                <div>
                    <label class="day-night">
                        <input type="checkbox" checked />
                        <div></div>
                    </label>
                </div>

            </div>
            <div class="mb-20 flex align-items space-evenly">
                <div class="profile-icon add target-ico" id="add-btn" onclick="showForm('add-product-form', 'add-btn')">
                    <span><i class="bi bi-folder-plus"></i></span>
                </div>
                <div class="profile-icon edit" id="edit-btn" onclick="showForm('edit-product-form', 'edit-btn')">
                    <span><i class="bi bi-pencil-fill"></i></span>
                </div>
                <div class="profile-icon delete" id="delete-btn"
                    onclick="showForm('delete-product-form', 'delete-btn')">
                    <span><i class="bi bi-folder-x"></i></span>
                </div>
            </div>

            <form id="add-product-form">
                <div class="formbold-input-group">
                    <label for="producttitle" class="formbold-form-label"> Product-Title </label>
                    <input type="text" name="product-title" id="producttitle" placeholder="Enter your product title"
                        class="formbold-form-input shadow" />
                </div>
                <div class="formbold-input-group">
                    <label for="brandname" class="formbold-form-label"> Brand-Name </label>
                    <input type="text" name="Brand-Name" id="brandname" placeholder="Enter your brand name"
                        class="formbold-form-input shadow" />
                </div>
                <div class="formbold-input-group">
                    <div class="flex center align-items">
                        <div class="formbold-input-group m-LR-2" style="width: 40%;">
                            <label for="productprice" class="formbold-form-label"> Price </label>
                            <input type="text" name="Product-Price" id="productprice" placeholder="EGP"
                                class="formbold-form-input shadow" />
                        </div>
                        <div class="formbold-input-group m-LR-2" style="width: 40%;">
                            <label for="sale-amount" class="formbold-form-label"> Sale</label>
                            <input type="text" name="sale-amount" id="sale-amount" placeholder="%"
                                class="formbold-form-input shadow" />
                        </div>
                        <div class="formbold-input-group m-LR-2" style="width: 40%;">
                            <label for="category" class="formbold-form-label">Category</label>
                            <div class="shadow">
                                <select style="height: 49px;" name="category" id="category" class="formbold-form-input">
                                    <option value="men">Men</option>
                                    <option value="women">Women</option>
                                    <option value="kids">Kids</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="formbold-input-group">
                    <label for="productdescription" class="formbold-form-label"> Product Description </label>
                    <textarea rows="6" name="product-description" id="productdescription"
                        placeholder="Type product description here..." class="formbold-form-input shadow"></textarea>
                </div>
                <div class="formbold-input-group">
                    <div class="flex center align-items shadow p5 mb-20">
                        <label for="name" class="formbold-form-label" style="margin-bottom:0 !important;"> Add Products
                        </label>
                        <button type="button" class="formbold-form-label point addbtn no-bg-i:hover" id="add-more">
                            <i class="bi bi-plus-square"></i>
                        </button>
                    </div>
                    <div id="input-container"></div>
                </div>
                <button id="sub-btn" type="submit" class="formbold-btn formbold-sub-btn flex center align-items">
                    <div id="sub-txt">Submit</div>
                    <div id="sub-spin" class="spinner-sm hidden">
                    </div>
                </button>
            </form>
            <form id="edit-product-form" class="hidden">
                <div class="flex center">
                    <div class="input-wrapper">
                        <input type="text" class="formbold-form-input" id="product-id-input"
                            placeholder="Enter item id you will edit">
                        <button id="sub-btn" type="button" class="available-height" onclick="searchProduct()">
                            <div id="sub-txt-edit">
                                <i class="bi bi-search"></i>
                            </div>
                            <div id="sub-spin-edit" class="spinner-sm hidden"></div>
                        </button>
                    </div>
                </div>
                <div id="warning" class="flex center warning-txt"></div>
                <div id="edititem-details" class="hidden">
                    <div class="formbold-input-group">
                        <label for="producttitle" class="formbold-form-label">Product-Title</label>
                        <input type="text" name="product-title" id="producttitle-2"
                            placeholder="Enter your product title" class="formbold-form-input shadow" />
                    </div>
                    <div class="formbold-input-group">
                        <label for="brandname" class="formbold-form-label">Brand-Name</label>
                        <input type="text" name="Brand-Name" id="brandname-2" placeholder="Enter your brand name"
                            class="formbold-form-input shadow" />
                    </div>
                    <div class="formbold-input-group">
                        <div class="flex center align-items">
                            <div class="formbold-input-group m-LR-2" style="width: 40%;">
                                <label for="productprice" class="formbold-form-label">Price</label>
                                <input type="text" name="Product-Price" id="productprice-2" placeholder="EGP"
                                    class="formbold-form-input shadow" />
                            </div>
                            <div class="formbold-input-group m-LR-2" style="width: 40%;">
                                <label for="sale-amount" class="formbold-form-label">Sale</label>
                                <input type="text" name="sale-amount" id="sale-amount-2" placeholder="%"
                                    class="formbold-form-input shadow" />
                            </div>
                            <div class="formbold-input-group m-LR-2" style="width: 40%;">
                                <label for="category" class="formbold-form-label">Category</label>
                                <div class="shadow">
                                    <select style="height: 49px;" name="category" id="category-2"
                                        class="formbold-form-input">
                                        <option value="men">Men</option>
                                        <option value="women">Women</option>
                                        <option value="kids">Kids</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="formbold-input-group">
                        <label for="productdescription" class="formbold-form-label">Product Description</label>
                        <textarea rows="6" name="product-description" id="productdescription-2"
                            placeholder="Type product description here..."
                            class="formbold-form-input shadow"></textarea>
                    </div>
                    <div class="formbold-input-group">
                        <div class="flex center align-items shadow p5 mb-20">
                            <label for="name" class="formbold-form-label" style="margin-bottom:0 !important;">Add
                                Products</label>
                            <button type="button" class="formbold-form-label point addbtn no-bg-i:hover" id="add-more2">
                                <i class="bi bi-plus-square"></i>
                            </button>
                        </div>
                        <div id="input-container2"></div>
                    </div>
                    <button id="edit-btn" type="button" class="formbold-btn formbold-sub-btn flex center align-items"
                        onclick="patchProduct()">
                        <div id="sub-txt">Edit</div>
                        <div id="sub-spin" class="spinner hidden"></div>
                    </button>
                </div>
            </form>

            <!-- <script>
                async function searchProduct() {
                    const spinner = document.getElementById('sub-spin-edit');
                    const searchicon = document.getElementById('sub-txt-edit');
                    const message = document.getElementById('warning');
                    const editdiv = document.getElementById('edititem-details');
                    const productId = document.getElementById('product-id-input').value.trim();
                    if (!productId) {
                        Swal.fire({
                            icon: "warning",
                            text: "Please enter a product ID",
                            showConfirmButton: false,
                            timer: 1500
                        });

                        return;
                    }

                    try {
                        const response = await fetch(`https://queen-s-footwear-default-rtdb.firebaseio.com/Products/${productId}.json`);
                        const data = await response.json();

                        if (!data) {

                            Swal.fire({
                                icon: "info",
                                text: "Product not found",
                                showConfirmButton: false,
                                timer: 1500
                            });
                            return;
                        }

                        // Fill the form with the fetched data
                        document.getElementById('producttitle-2').value = data['product-title'] || '';
                        document.getElementById('brandname-2').value = data['Brand-Name'] || '';
                        document.getElementById('productprice-2').value = data['Product-Price'] || '';
                        document.getElementById('sale-amount-2').value = data['sale-amount'] || '';
                        document.getElementById('category-2').value = data['category'] || '';
                        document.getElementById('productdescription-2').value = data['product-description'] || '';

                        const container = document.getElementById('input-container2');
                        container.innerHTML = '';  // Clear previous entries

                        const sizes = data['sizes'];
                        let count = 0;
                        for (const size in sizes) {
                            for (const color in sizes[size]) {
                                count++;
                                const product = sizes[size][color];

                                const newDiv = document.createElement('div');
                                newDiv.classList.add('flex', 'center', 'input-set', 'mb-3', 'flex-wrap', 'mb-30', 'add-product-cart', 'product-record', 'shadow');
                                newDiv.id = `p${count}`;

                                newDiv.innerHTML = `
                                    <div class="i-div align-items">
                                        <button type="button" style="border: none; margin-left:5px;margin-bottom: 0px;" class="formbold-form-label point toggle-expand2 no-bg-i cus-btn">
                                            <i class="bi bi-arrows-angle-contract 2 no-bg-i"></i>
                                            <i class="bi bi-arrows-angle-expand 2 no-bg-i none"></i>
                                        </button>
                                        <button type="button" style="border: none; margin-left:auto" class=" point no-bg-i toggle-delete2 ml-auto cus-btn">
                                            <i class="bi bi-x-lg"></i>
                                        </button>
                                        <div class="flex center align-items ml-auto">
                                            <h5 class="mr-3 none" id="Quantity2">Quantity</h5>
                                            <h5 class="none" id="QuantityValue2">${product.qty}</h5>
                                        </div>
                                        <div class="flex center align-items ml-auto">
                                            <h5 class="mr-3 none" id="size2">Size</h5>
                                            <h5 class="none" id="sizevalue2">${size}</h5>
                                        </div>
                                        <div class="flex center align-items ml-auto">
                                            <label class="circle mr-3 none" id="Colorcircle2" style="background-color: ${product['color-value']};"></label>
                                            <h5 class="color-value none" id="colorvalue2">${product['color-value']}</h5>
                                        </div>
                                    </div>
                                    <div class="product-data" id="product-data2">
                                        <div class="flex mb-3">
                                            <input id="size2" type="text" name="size2" placeholder="Size" class="formbold-form-input m-LR-2" value="${size}">
                                            <input id="quantity2" type="text" name="quantity2" placeholder="Quantity" class="formbold-form-input m-LR-2" value="${product.qty}">
                                        </div>
                                        <div class="flex mb-3">
                                            <input type="text" id="img1" id name="product-photo2" placeholder="pic Url 1" class="formbold-form-input m-LR-2" value="${product.img1}">
                                            <input type="text" id="img2" name="product-photo2-2" placeholder="pic Url 2" class="formbold-form-input m-LR-2" value="${product.img2}">
                                        </div>
                                        <div class="flex center  mb-3">
                                            <div class="color-input-wrapper m-LR-2">
                                                <div class="flex center align-items">
                                                    <input style="width:45px;" type="text" name="color2" class="formbold-form-input" value="${color}">
                                                    <input id="Color2" type="color" name="color-value2" class="color-picker" value="${product['color-value']}">
                                                </div>
                                            </div>
                                            <input id="colorname2" type="text" name="color-name2" style="width: 50%;" placeholder="Black" class="formbold-form-input m-LR-2" value="${color}">
                                        </div>
                                    </div>
                                `;
                                container.appendChild(newDiv);
                                setupToggleExpand2(newDiv.querySelector('.toggle-expand2'));
                                setupDeleteButton2(newDiv.querySelector('.toggle-delete2'), newDiv.id);
                            }
                        }

                        editdiv.classList.remove('hidden');

                    } catch (error) {
                        Swal.fire({
                            icon: "error",
                            text: "An error occurred while fetching product details",
                            showConfirmButton: false,
                            timer: 1500
                        });

                        editdiv.classList.add('hidden');
                    }
                }

                async function patchProduct() {
                    const productId = document.getElementById('product-id-input').value.trim();
                    const message = document.getElementById('warning');

                    if (!productId) {
                        Swal.fire({
                            icon: "warning",
                            text: "Please enter a product ID",
                            showConfirmButton: false,
                            timer: 1500
                        });
                        return;
                    }

                    try {
                        const productData = {
                            'product-title': document.getElementById('producttitle-2').value,
                            'Brand-Name': document.getElementById('brandname-2').value,
                            'Product-Price': document.getElementById('productprice-2').value,
                            'sale-amount': document.getElementById('sale-amount-2').value,
                            'category': document.getElementById('category-2').value,
                            'product-description': document.getElementById('productdescription-2').value,
                        };

                        const inputContainer = document.getElementById('input-container2');
                        const products = inputContainer.querySelectorAll('.product-record');
                        const sizes = {};

                        products.forEach((product) => {
                            const size = product.querySelector('[name="size2"]').value;
                            const qty = product.querySelector('[name="quantity2"]').value;
                            const img1 = product.querySelector('[name="product-photo2"]').value;
                            const img2 = product.querySelector('[name="product-photo2-2"]').value;
                            const color = product.querySelector('[name="color-name2"]').value;
                            const colorValue = product.querySelector('[name="color-value2"]').value;

                            if (!sizes[size]) sizes[size] = {};
                            sizes[size][color] = {
                                qty,
                                img1,
                                img2,
                                'color-value': colorValue
                            };
                        });

                        productData['sizes'] = sizes;

                        const response = await fetch(`https://queen-s-footwear-default-rtdb.firebaseio.com/Products/${productId}.json`, {
                            method: 'PATCH',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(productData)
                        });

                        if (!response.ok) {
                            throw new Error('Failed to update product');
                        }

                        Swal.fire({
                            icon: 'success',
                            title: 'Updated',
                            showConfirmButton: false,
                            timer: 1500
                        }).then(() => {
                            // Hide the edit div and reset its content
                            const editdiv = document.getElementById('edititem-details');
                            editdiv.classList.add('hidden');
                            document.getElementById('edit-product-form').reset();
                            document.getElementById('input-container2').innerHTML = ''; // Clear dynamic fields
                        });
                    } catch (error) {
                        Swal.fire({
                            icon: "error",
                            title: "Failed",
                            showConfirmButton: false,
                            timer: 1500
                        });
                    }
                }

                document.getElementById('add-more2').addEventListener('click', () => {
                    const container = document.getElementById('input-container2');
                    const count = container.children.length + 1;

                    const newDiv = document.createElement('div');
                    newDiv.classList.add('flex', 'center', 'input-set', 'mb-3', 'flex-wrap', 'mb-30', 'add-product-cart', 'product-record', 'shadow');
                    newDiv.id = `p${count}`;

                    newDiv.innerHTML = `
                        <div class="i-div align-items">
            <button type="button" style="border: none; margin-left:5px;margin-bottom: 0px;" class="formbold-form-label point toggle-expand2 no-bg-i cus-btn">
                <i class="bi bi-arrows-angle-contract  no-bg-i"></i>
                <i class="bi bi-arrows-angle-expand  no-bg-i none"></i>
            </button>
            <button type="button" style="border: none; margin-left:auto" class=" point no-bg-i toggle-delete2 ml-auto cus-btn">
                <i class="bi bi-x-lg"></i>
            </button>
            <div class="flex center align-items ml-auto">
                <h5 class="mr-3 none" id="Quantity2">Quantity</h5>
                <h5 class="none" id="QuantityValue2">1</h5>
            </div>
            <div class="flex center align-items ml-auto">
                <h5 class="mr-3 none" id="size2">Size</h5>
                <h5 class="none" id="sizevalue2"></h5>
            </div>
            <div class="flex center align-items ml-auto">
                <label class="circle mr-3 none" id="Colorcircle2"></label>
                <h5 class="color-value none" id="colorvalue2"></h5>
            </div>
        </div>
        <div class="product-data " id="product-data2">
            <div class="flex mb-3">
                <input id="size2" type="text" name="size2" placeholder="Size" class="formbold-form-input m-LR-2">
                <input id="quantity2" type="text" name="quantity2" placeholder="Quantity" class="formbold-form-input m-LR-2" value="1">
            </div>
            <div class="flex mb-3">
                <input type="text" name="product-photo2" placeholder="pic Url 1" class="formbold-form-input m-LR-2">
                <input type="text" name="product-photo2-2" placeholder="pic Url 2" class="formbold-form-input m-LR-2">
            </div>
            <div class="flex center mb-3">
                <div class="color-input-wrapper m-LR-2">
                    <div class="flex center align-items">
                        <input style="width:45px;" type="text" name="color2" class="formbold-form-input">
                        <input id="Color2" type="color" name="color-value2" class="color-picker">
                    </div>
                </div>
                <input id="colorname2" type="text" name="color-name2" style="width: 50%;" placeholder="Black" class="formbold-form-input m-LR-2">
            </div>
        </div>
                    `;
                    container.appendChild(newDiv);
                    setupToggleExpand2(newDiv.querySelector('.toggle-expand2'));
                    setupDeleteButton2(newDiv.querySelector('.toggle-delete2'), newDiv.id);
                });
                function setupToggleExpand2(button) {
                    button.addEventListener('click', function () {
                        const expandIcon = button.querySelector('.bi-arrows-angle-expand');
                        const contractIcon = button.querySelector('.bi-arrows-angle-contract');
                        const productData = button.closest('.input-set').querySelector('#product-data2');
                        const sizeLabel = button.closest('.i-div').querySelector('#size2');
                        const QtyLabel = button.closest('.i-div').querySelector('#Quantity2');
                        const ColorcircleLabel = button.closest('.i-div').querySelector('#Colorcircle2');
                        const sizevalue = button.closest('.i-div').querySelector('#sizevalue2');
                        const colorvalue = button.closest('.i-div').querySelector('#colorvalue2');
                        const Qtyvalue = button.closest('.i-div').querySelector('#QuantityValue2');

                        const productRecord = button.closest('.product-record');
                        const id = productRecord ? productRecord.id : null;

                        if (id) {
                            const productDiv = document.getElementById(id);
                            const sizeInput = productDiv.querySelector('input#size2');
                            const colorInput = productDiv.querySelector('input#Color2');
                            const quantityInput = productDiv.querySelector('input#quantity2');
                            const ColorcircleLabel = productDiv.querySelector('label#Colorcircle2');

                            const size = sizeInput ? sizeInput.value : '';
                            const color = colorInput ? colorInput.value : '';
                            const Qty = quantityInput ? quantityInput.value : '';

                            if (ColorcircleLabel) {
                                ColorcircleLabel.style.backgroundColor = color;
                            }

                            sizevalue.innerText = size;
                            colorvalue.innerText = color;
                            Qtyvalue.innerText = Qty;
                        }

                        if (expandIcon.classList.contains('none')) {
                            expandIcon.classList.remove('none');
                            contractIcon.classList.add('none');
                            productData.classList.add('none');
                            sizeLabel.classList.remove('none');
                            ColorcircleLabel.classList.remove('none');
                            QtyLabel.classList.remove('none');
                            sizevalue.classList.remove('none');
                            colorvalue.classList.remove('none');
                            Qtyvalue.classList.remove('none');
                        } else {
                            expandIcon.classList.add('none');
                            contractIcon.classList.remove('none');
                            productData.classList.remove('none');
                            sizeLabel.classList.add('none');
                            ColorcircleLabel.classList.add('none');
                            QtyLabel.classList.add('none');
                            sizevalue.classList.add('none');
                            colorvalue.classList.add('none');
                            Qtyvalue.classList.add('none');
                        }
                    });
                }

                function setupDeleteButton2(button, productId) {
                    button.addEventListener('click', function () {
                        const productDiv = document.getElementById(productId);

                        if (productDiv) {
                            Swal.fire({
                                title: 'Are you sure?',
                                text: "Do you want to delete this item?",
                                icon: 'warning',
                                showCancelButton: true,
                                confirmButtonText: 'Yes, delete it!',
                                cancelButtonText: 'No, keep it',
                                customClass: {
                                    title: 'swal2-custom',
                                    htmlContainer: 'swal2-custom',
                                    confirmButton: 'swal2-custom',
                                    cancelButton: 'swal2-custom',
                                }
                            }).then((result) => {
                                if (result.isConfirmed) {
                                    productDiv.remove();
                                    Swal.fire({
                                        title: 'Deleted!',
                                        text: 'Your item has been deleted.',
                                        icon: 'success',
                                        customClass: {
                                            container: 'swal2-custom',
                                            title: 'swal2-custom',
                                            htmlContainer: 'swal2-custom',
                                            confirmButton: 'swal2-custom',
                                        }
                                    });
                                }
                            });
                        }
                    });
                }

            </script> -->
            <script>
                async function searchProduct() {
                    const spinner = document.getElementById('sub-spin-edit');
                    const searchicon = document.getElementById('sub-txt-edit');
                    const message = document.getElementById('warning');
                    const editdiv = document.getElementById('edititem-details');
                    const productId = document.getElementById('product-id-input').value.trim();

                    // Show the spinner
                    spinner.classList.remove('hidden');
                    searchicon.classList.add('hidden');

                    if (!productId) {
                        editdiv.classList.add('hidden');
                        Swal.fire({
                            icon: "warning",
                            text: "Please enter a product ID",
                            showConfirmButton: false,
                            timer: 1500
                        }).then(() => {
                            // Hide the spinner after showing the warning
                            spinner.classList.add('hidden');
                            searchicon.classList.remove('hidden');

                        });

                        return;
                    }

                    try {
                        const response = await fetch(`https://queen-s-footwear-default-rtdb.firebaseio.com/Products/${productId}.json`);
                        const data = await response.json();

                        if (!data) {
                            editdiv.classList.add('hidden');
                            Swal.fire({
                                icon: "info",
                                text: "Product not found",
                                showConfirmButton: false,
                                timer: 1500
                            }).then(() => {
                                // Hide the spinner after showing the info
                                spinner.classList.add('hidden');
                                searchicon.classList.remove('hidden');
                            });
                            return;
                        }

                        // Fill the form with the fetched data
                        document.getElementById('producttitle-2').value = data['product-title'] || '';
                        document.getElementById('brandname-2').value = data['Brand-Name'] || '';
                        document.getElementById('productprice-2').value = data['Product-Price'] || '';
                        document.getElementById('sale-amount-2').value = data['sale-amount'] || '';
                        document.getElementById('category-2').value = data['category'] || '';
                        document.getElementById('productdescription-2').value = data['product-description'] || '';

                        const container = document.getElementById('input-container2');
                        container.innerHTML = '';  // Clear previous entries

                        const sizes = data['sizes'];
                        let count = 0;
                        for (const size in sizes) {
                            for (const color in sizes[size]) {
                                count++;
                                const product = sizes[size][color];

                                const newDiv = document.createElement('div');
                                newDiv.classList.add('flex', 'center', 'input-set', 'mb-3', 'flex-wrap', 'mb-30', 'add-product-cart', 'product-record', 'shadow');
                                newDiv.id = `p${count}`;

                                newDiv.innerHTML = `
                            <div class="i-div align-items">
                                <button type="button" style="border: none; margin-left:5px;margin-bottom: 0px;" class="formbold-form-label point toggle-expand2 no-bg-i cus-btn">
                                    <i class="bi bi-arrows-angle-contract 2 no-bg-i"></i>
                                    <i class="bi bi-arrows-angle-expand 2 no-bg-i none"></i>
                                </button>
                                <button type="button" style="border: none; margin-left:auto" class=" point no-bg-i toggle-delete2 ml-auto cus-btn">
                                    <i class="bi bi-x-lg"></i>
                                </button>
                                <div class="flex center align-items ml-auto">
                                    <h5 class="mr-3 none" id="Quantity2">Quantity</h5>
                                    <h5 class="none" id="QuantityValue2">${product.qty}</h5>
                                </div>
                                <div class="flex center align-items ml-auto">
                                    <h5 class="mr-3 none" id="size2">Size</h5>
                                    <h5 class="none" id="sizevalue2">${size}</h5>
                                </div>
                                <div class="flex center align-items ml-auto">
                                    <label class="circle mr-3 none" id="Colorcircle2" style="background-color: ${product['color-value']};"></label>
                                    <h5 class="color-value none" id="colorvalue2">${product['color-value']}</h5>
                                </div>
                            </div>
                            <div class="product-data" id="product-data2">
                                <div class="flex mb-3">
                                    <input id="size2" type="text" name="size2" placeholder="Size" class="formbold-form-input m-LR-2" value="${size}">
                                    <input id="quantity2" type="text" name="quantity2" placeholder="Quantity" class="formbold-form-input m-LR-2" value="${product.qty}">
                                </div>
                                <div class="flex mb-3">
                                    <input type="text" id="img1" id name="product-photo2" placeholder="pic Url 1" class="formbold-form-input m-LR-2" value="${product.img1}">
                                    <input type="text" id="img2" name="product-photo2-2" placeholder="pic Url 2" class="formbold-form-input m-LR-2" value="${product.img2}">
                                </div>
                                <div class="flex center  mb-3">
                                    <div class="color-input-wrapper m-LR-2">
                                        <div class="flex center align-items">
                                            <input style="width:45px;" type="text" name="color2" class="formbold-form-input" value="${color}">
                                            <input id="Color2" type="color" name="color-value2" class="color-picker" value="${product['color-value']}">
                                        </div>
                                    </div>
                                    <input id="colorname2" type="text" name="color-name2" style="width: 50%;" placeholder="Black" class="formbold-form-input m-LR-2" value="${color}">
                                </div>
                            </div>
                        `;
                                container.appendChild(newDiv);
                                setupToggleExpand2(newDiv.querySelector('.toggle-expand2'));
                                setupDeleteButton2(newDiv.querySelector('.toggle-delete2'), newDiv.id);
                            }
                        }

                        editdiv.classList.remove('hidden');

                    } catch (error) {
                        Swal.fire({
                            icon: "error",
                            text: "An error occurred while fetching product details",
                            showConfirmButton: false,
                            timer: 1500
                        });
                        editdiv.classList.add('hidden');
                    } finally {
                        // Hide the spinner after processing is complete
                        spinner.classList.add('hidden');
                        searchicon.classList.remove('hidden');
                    }
                }

                async function patchProduct() {
                    const productId = document.getElementById('product-id-input').value.trim();
                    const message = document.getElementById('warning');

                    if (!productId) {
                        Swal.fire({
                            icon: "warning",
                            text: "Please enter a product ID",
                            showConfirmButton: false,
                            timer: 1500
                        });
                        return;
                    }

                    try {
                        const productData = {
                            'product-title': document.getElementById('producttitle-2').value,
                            'Brand-Name': document.getElementById('brandname-2').value,
                            'Product-Price': document.getElementById('productprice-2').value,
                            'sale-amount': document.getElementById('sale-amount-2').value,
                            'category': document.getElementById('category-2').value,
                            'product-description': document.getElementById('productdescription-2').value,
                        };

                        const inputContainer = document.getElementById('input-container2');
                        const products = inputContainer.querySelectorAll('.product-record');
                        const sizes = {};

                        products.forEach((product) => {
                            const size = product.querySelector('[name="size2"]').value;
                            const qty = product.querySelector('[name="quantity2"]').value;
                            const img1 = product.querySelector('[name="product-photo2"]').value;
                            const img2 = product.querySelector('[name="product-photo2-2"]').value;
                            const color = product.querySelector('[name="color-name2"]').value;
                            const colorValue = product.querySelector('[name="color-value2"]').value;

                            if (!sizes[size]) sizes[size] = {};
                            sizes[size][color] = {
                                qty,
                                img1,
                                img2,
                                'color-value': colorValue
                            };
                        });

                        productData['sizes'] = sizes;

                        const response = await fetch(`https://queen-s-footwear-default-rtdb.firebaseio.com/Products/${productId}.json`, {
                            method: 'PATCH',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(productData)
                        });

                        if (!response.ok) {
                            throw new Error('Failed to update product');
                        }

                        Swal.fire({
                            icon: 'success',
                            title: 'Updated',
                            showConfirmButton: false,
                            timer: 1500
                        }).then(() => {
                            // Hide the edit div and reset its content
                            const editdiv = document.getElementById('edititem-details');
                            editdiv.classList.add('hidden');
                            document.getElementById('edit-product-form').reset();
                            document.getElementById('input-container2').innerHTML = ''; // Clear dynamic fields
                        });
                    } catch (error) {
                        Swal.fire({
                            icon: "error",
                            title: "Failed",
                            showConfirmButton: false,
                            timer: 1500
                        });
                    }
                }

                document.getElementById('add-more2').addEventListener('click', () => {
                    const container = document.getElementById('input-container2');
                    const count = container.children.length + 1;

                    const newDiv = document.createElement('div');
                    newDiv.classList.add('flex', 'center', 'input-set', 'mb-3', 'flex-wrap', 'mb-30', 'add-product-cart', 'product-record', 'shadow');
                    newDiv.id = `p${count}`;

                    newDiv.innerHTML = `
                        <div class="i-div align-items">
            <button type="button" style="border: none; margin-left:5px;margin-bottom: 0px;" class="formbold-form-label point toggle-expand2 no-bg-i cus-btn">
                <i class="bi bi-arrows-angle-contract  no-bg-i"></i>
                <i class="bi bi-arrows-angle-expand  no-bg-i none"></i>
            </button>
            <button type="button" style="border: none; margin-left:auto" class=" point no-bg-i toggle-delete2 ml-auto cus-btn">
                <i class="bi bi-x-lg"></i>
            </button>
            <div class="flex center align-items ml-auto">
                <h5 class="mr-3 none" id="Quantity2">Quantity</h5>
                <h5 class="none" id="QuantityValue2">1</h5>
            </div>
            <div class="flex center align-items ml-auto">
                <h5 class="mr-3 none" id="size2">Size</h5>
                <h5 class="none" id="sizevalue2"></h5>
            </div>
            <div class="flex center align-items ml-auto">
                <label class="circle mr-3 none" id="Colorcircle2"></label>
                <h5 class="color-value none" id="colorvalue2"></h5>
            </div>
        </div>
        <div class="product-data " id="product-data2">
            <div class="flex mb-3">
                <input id="size2" type="text" name="size2" placeholder="Size" class="formbold-form-input m-LR-2">
                <input id="quantity2" type="text" name="quantity2" placeholder="Quantity" class="formbold-form-input m-LR-2" value="1">
            </div>
            <div class="flex mb-3">
                <input type="text" name="product-photo2" placeholder="pic Url 1" class="formbold-form-input m-LR-2">
                <input type="text" name="product-photo2-2" placeholder="pic Url 2" class="formbold-form-input m-LR-2">
            </div>
            <div class="flex center mb-3">
                <div class="color-input-wrapper m-LR-2">
                    <div class="flex center align-items">
                        <input style="width:45px;" type="text" name="color2" class="formbold-form-input">
                        <input id="Color2" type="color" name="color-value2" class="color-picker">
                    </div>
                </div>
                <input id="colorname2" type="text" name="color-name2" style="width: 50%;" placeholder="Black" class="formbold-form-input m-LR-2">
            </div>
        </div>
                    `;
                    container.appendChild(newDiv);
                    setupToggleExpand2(newDiv.querySelector('.toggle-expand2'));
                    setupDeleteButton2(newDiv.querySelector('.toggle-delete2'), newDiv.id);
                });
                function setupToggleExpand2(button) {
                    button.addEventListener('click', function () {
                        const expandIcon = button.querySelector('.bi-arrows-angle-expand');
                        const contractIcon = button.querySelector('.bi-arrows-angle-contract');
                        const productData = button.closest('.input-set').querySelector('#product-data2');
                        const sizeLabel = button.closest('.i-div').querySelector('#size2');
                        const QtyLabel = button.closest('.i-div').querySelector('#Quantity2');
                        const ColorcircleLabel = button.closest('.i-div').querySelector('#Colorcircle2');
                        const sizevalue = button.closest('.i-div').querySelector('#sizevalue2');
                        const colorvalue = button.closest('.i-div').querySelector('#colorvalue2');
                        const Qtyvalue = button.closest('.i-div').querySelector('#QuantityValue2');

                        const productRecord = button.closest('.product-record');
                        const id = productRecord ? productRecord.id : null;

                        if (id) {
                            const productDiv = document.getElementById(id);
                            const sizeInput = productDiv.querySelector('input#size2');
                            const colorInput = productDiv.querySelector('input#Color2');
                            const quantityInput = productDiv.querySelector('input#quantity2');
                            const ColorcircleLabel = productDiv.querySelector('label#Colorcircle2');

                            const size = sizeInput ? sizeInput.value : '';
                            const color = colorInput ? colorInput.value : '';
                            const Qty = quantityInput ? quantityInput.value : '';

                            if (ColorcircleLabel) {
                                ColorcircleLabel.style.backgroundColor = color;
                            }

                            sizevalue.innerText = size;
                            colorvalue.innerText = color;
                            Qtyvalue.innerText = Qty;
                        }

                        if (expandIcon.classList.contains('none')) {
                            expandIcon.classList.remove('none');
                            contractIcon.classList.add('none');
                            productData.classList.add('none');
                            sizeLabel.classList.remove('none');
                            ColorcircleLabel.classList.remove('none');
                            QtyLabel.classList.remove('none');
                            sizevalue.classList.remove('none');
                            colorvalue.classList.remove('none');
                            Qtyvalue.classList.remove('none');
                        } else {
                            expandIcon.classList.add('none');
                            contractIcon.classList.remove('none');
                            productData.classList.remove('none');
                            sizeLabel.classList.add('none');
                            ColorcircleLabel.classList.add('none');
                            QtyLabel.classList.add('none');
                            sizevalue.classList.add('none');
                            colorvalue.classList.add('none');
                            Qtyvalue.classList.add('none');
                        }
                    });
                }

                function setupDeleteButton2(button, productId) {
                    button.addEventListener('click', function () {
                        const productDiv = document.getElementById(productId);

                        if (productDiv) {
                            Swal.fire({
                                title: 'Are you sure?',
                                text: "Do you want to delete this item?",
                                icon: 'warning',
                                showCancelButton: true,
                                confirmButtonText: 'Yes, delete it!',
                                cancelButtonText: 'No, keep it',
                                customClass: {
                                    title: 'swal2-custom',
                                    htmlContainer: 'swal2-custom',
                                    confirmButton: 'swal2-custom',
                                    cancelButton: 'swal2-custom',
                                }
                            }).then((result) => {
                                if (result.isConfirmed) {
                                    productDiv.remove();
                                    Swal.fire({
                                        title: 'Deleted!',
                                        text: 'Your item has been deleted.',
                                        icon: 'success',
                                        customClass: {
                                            container: 'swal2-custom',
                                            title: 'swal2-custom',
                                            htmlContainer: 'swal2-custom',
                                            confirmButton: 'swal2-custom',
                                        }
                                    });
                                }
                            });
                        }
                    });
                }

            </script>
            <form id="delete-product-form" class="hidden">
                <div class="flex center">
                    <div class="input-wrapper">
                        <input type="text" class="formbold-form-input" id="product-id-input-del"
                            placeholder="Enter item id you will delete">
                        <button id="sub-btn-del" type="button" class="available-height" onclick="searchProductdel()">
                            <div id="sub-txt-del">
                                <i class="bi bi-search"></i>
                            </div>
                            <div id="sub-spin-del" class="spinner-sm hidden"></div>
                        </button>
                    </div>
                </div>
                <div id="warning-del" class="flex center warning-txt"></div>
                <div id="deleteitem-details" class="hidden">
                    <div class="formbold-input-group">
                        <label for="producttitle" class="formbold-form-label">Product Title</label>
                        <input type="text" name="product-title" id="producttitle-del" class="formbold-form-input shadow"
                            disabled />
                    </div>
                    <div class="formbold-input-group">
                        <label for="brandname" class="formbold-form-label">Brand Name</label>
                        <input type="text" name="Brand-Name" id="brandname-del" class="formbold-form-input shadow"
                            disabled />
                    </div>
                    <div class="formbold-input-group">
                        <div class="flex center align-items">
                            <div class="formbold-input-group m-LR-2" style="width: 40%;">
                                <label for="productprice" class="formbold-form-label">Price</label>
                                <input type="text" name="Product-Price" id="productprice-del"
                                    class="formbold-form-input shadow" disabled />
                            </div>
                            <div class="formbold-input-group m-LR-2" style="width: 40%;">
                                <label for="sale-amount" class="formbold-form-label">Sale</label>
                                <input type="text" name="sale-amount" id="sale-amount-del"
                                    class="formbold-form-input shadow" disabled />
                            </div>
                            <div class="formbold-input-group m-LR-2" style="width: 40%;">
                                <label for="category" class="formbold-form-label">Category</label>
                                <div class="shadow">
                                    <select name="category" id="category-del" class="formbold-form-input" disabled>
                                        <option value="men">Men</option>
                                        <option value="women">Women</option>
                                        <option value="kids">Kids</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="formbold-input-group">
                        <label for="productdescription" class="formbold-form-label">Product Description</label>
                        <textarea rows="6" name="product-description" id="productdescription-del"
                            class="formbold-form-input shadow" disabled></textarea>
                    </div>
                    <div class="formbold-input-group">
                        <div id="input-container-del"></div>
                    </div>
                    <button id="del-btn" type="button" class="formbold-btn formbold-sub-btn flex center align-items"
                        onclick="deleteProduct()">
                        <div id="sub-txt">Delete</div>
                        <div id="sub-spin" class="spinner hidden"></div>
                    </button>
                </div>
            </form>
            <script>
                async function searchProductdel() {
                    const spinner = document.getElementById('sub-spin-del');
                    const searchicon = document.getElementById('sub-txt-del');
                    const message = document.getElementById('warning-del');
                    const deleteDiv = document.getElementById('deleteitem-details');
                    const productId = document.getElementById('product-id-input-del').value.trim();

                    // Show the spinner
                    spinner.classList.remove('hidden');
                    searchicon.classList.add('hidden');


                    if (!productId) {
                        Swal.fire({

                            text: 'Please enter a product ID',
                            icon: 'info',
                            timer: 1500,
                            showConfirmButton: false
                        }).then(() => {
                            // Hide the spinner after showing the warning
                            spinner.classList.add('hidden');
                            searchicon.classList.remove('hidden');
                            deleteDiv.classList.add('hidden');
                        });

                        return;
                    }

                    try {
                        const response = await fetch(`https://queen-s-footwear-default-rtdb.firebaseio.com/Products/${productId}.json`);
                        const data = await response.json();

                        if (!data) {
                            Swal.fire({

                                text: 'Product not found',
                                icon: 'info',
                                timer: 1500,
                                showConfirmButton: false
                            }).then(() => {
                                // Hide the spinner after showing the info
                                spinner.classList.add('hidden');
                                searchicon.classList.remove('hidden');
                                deleteDiv.classList.add('hidden');
                            });

                            return;
                        }

                        // Fill the form with the fetched data
                        document.getElementById('producttitle-del').value = data['product-title'] || '';
                        document.getElementById('brandname-del').value = data['Brand-Name'] || '';
                        document.getElementById('productprice-del').value = data['Product-Price'] || '';
                        document.getElementById('sale-amount-del').value = data['sale-amount'] || '';
                        document.getElementById('category-del').value = data['category'] || '';
                        document.getElementById('productdescription-del').value = data['product-description'] || '';

                        const container = document.getElementById('input-container-del');
                        container.innerHTML = '';  // Clear previous entries

                        const sizes = data['sizes'];
                        let count = 0;
                        for (const size in sizes) {
                            for (const color in sizes[size]) {
                                count++;
                                const product = sizes[size][color];

                                const newDiv = document.createElement('div');
                                newDiv.classList.add('flex', 'center', 'input-set', 'mb-3', 'flex-wrap', 'mb-30', 'add-product-cart', 'product-record', 'shadow');
                                newDiv.id = `p${count}`;

                                newDiv.innerHTML = `
                    <div class="product-data" id="product-data">
                        <div class="flex mb-3">
                            <input type="text" name="size" placeholder="Size" class="formbold-form-input m-LR-2" value="${size}" disabled>
                            <input type="text" name="quantity" placeholder="Quantity" class="formbold-form-input m-LR-2" value="${product.qty}" disabled>
                        </div>
                        <div class="flex mb-3">
                            <input type="text" name="product-photo" placeholder="pic Url 1" class="formbold-form-input m-LR-2" value="${product.img1}" disabled>
                            <input type="text" name="product-photo2" placeholder="pic Url 2" class="formbold-form-input m-LR-2" value="${product.img2}" disabled>
                        </div>
                        <div class="flex center mb-3">
                            <div class="color-input-wrapper m-LR-2">
                                <div class="flex center align-items">
                                    <input type="text" name="color" class="formbold-form-input" value="" disabled>
                                    <input type="color" name="color-value" class="color-picker" disabled>
                                </div>
                            </div>
                            <input type="text" name="color-name" style="width: 50%;" class="formbold-form-input m-LR-2" value="${color}" disabled>
                        </div>
                    </div>
                `;
                                container.appendChild(newDiv);
                            }
                        }

                        // Show the delete item details
                        deleteDiv.classList.remove('hidden');
                        spinner.classList.add('hidden');
                        searchicon.classList.remove('hidden');
                    } catch (error) {
                        Swal.fire({

                            text: 'Error fetching product',
                            icon: 'Error',
                            timer: 1500,
                            showConfirmButton: false
                        });
                        deleteDiv.classList.remove('hidden');

                    }
                }

                async function deleteProduct() {
                    const productId = document.getElementById('product-id-input-del').value.trim();
                    if (!productId) {

                        Swal.fire({

                            text: 'Please enter a product ID',
                            icon: 'Error',
                            timer:
                                1500,
                            showConfirmButton: false
                        });
                        deleteDiv.classList.remove('hidden');
                        return;
                    }

                    Swal.fire({
                        title: 'Are you sure?',
                        text: "Do you want to delete this product?",
                        icon: 'warning',
                        showCancelButton: true,

                        confirmButtonText: 'Yes, delete it!'
                    }).then(async (result) => {
                        if (result.isConfirmed) {
                            try {
                                const response = await fetch(`https://queen-s-footwear-default-rtdb.firebaseio.com/Products/${productId}.json`, {
                                    method: 'DELETE',
                                });

                                if (response.ok) {
                                    Swal.fire({
                                        title: 'Deleted!',
                                        text: '',
                                        icon: 'success',
                                        timer: 1500,
                                        showConfirmButton: false
                                    });
                                    // Clear the form and hide the details section
                                    document.getElementById('delete-product-form').reset();
                                    document.getElementById('deleteitem-details').classList.add('hidden');
                                } else {

                                    Swal.fire({
                                        title: 'Error',
                                        text: '',
                                        icon: 'Error',
                                        timer: 1500,
                                        showConfirmButton: false
                                    });
                                }
                            } catch (error) {
                                console.error('Error deleting product:', error);
                                Swal.fire('Error', 'Error deleting product', 'error');
                            }
                        }
                    });
                }
            </script>

            </script>


            <script>
                function showForm(formId, btnId) {
                    // Hide all forms
                    document.getElementById('add-product-form').classList.add('hidden');
                    document.getElementById('edit-product-form').classList.add('hidden');
                    document.getElementById('delete-product-form').classList.add('hidden');

                    // Show the selected form
                    document.getElementById(formId).classList.remove('hidden');

                    // Remove target-ico class from all profile-icon divs
                    document.querySelectorAll('.profile-icon').forEach(function (div) {
                        div.classList.remove('target-ico');
                    });

                    // Add target-ico class to the clicked div
                    document.getElementById(btnId).classList.add('target-ico');
                }

                // Optional: Initialize with a specific form visible
                // showForm('add-product-form', 'add-btn');
            </script>


            <script>
                document.getElementById('add-more').addEventListener('click', function () {
                    let count = document.querySelectorAll('.input-set').length + 1;
                    const inputContainer = document.getElementById('input-container');

                    const newInputSet = document.createElement('div');
                    newInputSet.classList.add('flex', 'center', 'input-set', 'mb-3', 'flex-wrap', 'mb-30', 'add-product-cart', 'product-record', 'shadow');
                    newInputSet.id = `p${count}`;

                    newInputSet.innerHTML = `
                    <div class="i-div align-items">
                        <button type="button" style="border: none; margin-left:5px;margin-bottom: 0px;" class="formbold-form-label point toggle-expand no-bg-i cus-btn">
                            <i class="bi bi-arrows-angle-contract no-bg-i"></i>
                            <i class="bi bi-arrows-angle-expand none no-bg-i"></i>
                        </button>
                        <button type="button" style="border: none; margin-left:auto" class=" point no-bg-i toggle-delete ml-auto cus-btn">
                            <i class="bi bi-x-lg"></i>
                        </button>
                        <div class="flex center align-items ml-auto">
                            <h5 class="none mr-3" id="Quantity">Quantity</h5>
                            <h5 class="none" id="QuantityValue"></h5>
                        </div>
                        <div class="flex center align-items ml-auto">
                            <h5 class="none mr-3" id="size">Size</h5>
                            <h5 class="none" id="sizevalue"></h5>
                        </div>
                        <div class="flex center align-items ml-auto">
                            <label class="circle none mr-3" id="Colorcircle"></label>
                            <h5 class="none color-value" id="colorvalue"></h5>
                        </div>
                    </div>
                    <div class="product-data" id="product-data">
                        <div class="flex mb-3">
                            <input id="size" type="text" name="size" placeholder="Size" class="formbold-form-input m-LR-2" />
                            
                            <input id="quantity" type="text" name="quantity" placeholder="Quantity" class="formbold-form-input m-LR-2" />
                        </div>
                        
                        <div class="flex mb-3">
                            <input type="text" name="product-photo" placeholder="pic Url 1" class="formbold-form-input m-LR-2" />
                            <input type="text" name="product-photo2" placeholder="pic Url 2" class="formbold-form-input m-LR-2" />
                        </div>
                        <div class="flex center  mb-3">
                            <div class="color-input-wrapper m-LR-2 ">
                                <div class="flex center align-items">
                                    <input style="width:45px;" type="text" name="color" class="formbold-form-input" />
                                    <input id="Color" type="color" name="color-value" class="color-picker">
                                </div>
                            </div>
                            <input id="colorname" type="text" name="color-name" style="width: 50%;" placeholder="Black" class="formbold-form-input m-LR-2" />
                        </div>
                    </div>
                `;

                    inputContainer.appendChild(newInputSet);
                    setupToggleExpand(newInputSet.querySelector('.toggle-expand'));
                    setupDeleteButton(newInputSet.querySelector('.toggle-delete'));
                });

                function setupToggleExpand(button) {
                    button.addEventListener('click', function () {
                        const expandIcon = button.querySelector('.bi-arrows-angle-expand');
                        const contractIcon = button.querySelector('.bi-arrows-angle-contract');
                        const productData = button.closest('.input-set').querySelector('#product-data');
                        const sizeLabel = button.closest('.i-div').querySelector('#size');
                        const QtyLabel = button.closest('.i-div').querySelector('#Quantity');
                        const ColorcircleLabel = button.closest('.i-div').querySelector('#Colorcircle');
                        const sizevalue = button.closest('.i-div').querySelector('#sizevalue');
                        const colorvalue = button.closest('.i-div').querySelector('#colorvalue');
                        const Qtyvalue = button.closest('.i-div').querySelector('#QuantityValue');

                        const productRecord = button.closest('.product-record');
                        const id = productRecord ? productRecord.id : null;

                        if (id) {
                            const productDiv = document.getElementById(id);
                            const sizeInput = productDiv.querySelector('input#size');
                            const colorInput = productDiv.querySelector('input#Color');
                            const quantityInput = productDiv.querySelector('input#quantity');
                            const ColorcircleLabel = productDiv.querySelector('label#Colorcircle');

                            const size = sizeInput ? sizeInput.value : '';
                            const color = colorInput ? colorInput.value : '';
                            const Qty = quantityInput ? quantityInput.value : '';

                            if (ColorcircleLabel) {
                                ColorcircleLabel.style.backgroundColor = color;
                            }

                            sizevalue.innerText = size;
                            colorvalue.innerText = color;
                            Qtyvalue.innerText = Qty;
                        }

                        if (expandIcon.classList.contains('none')) {
                            expandIcon.classList.remove('none');
                            contractIcon.classList.add('none');
                            productData.classList.add('none');
                            sizeLabel.classList.remove('none');
                            ColorcircleLabel.classList.remove('none');
                            QtyLabel.classList.remove('none');
                            sizevalue.classList.remove('none');
                            colorvalue.classList.remove('none');
                            Qtyvalue.classList.remove('none');
                        } else {
                            expandIcon.classList.add('none');
                            contractIcon.classList.remove('none');
                            productData.classList.remove('none');
                            sizeLabel.classList.add('none');
                            ColorcircleLabel.classList.add('none');
                            QtyLabel.classList.add('none');
                            sizevalue.classList.add('none');
                            colorvalue.classList.add('none');
                            Qtyvalue.classList.add('none');
                        }
                    });
                }

                function setupDeleteButton(button) {
                    button.addEventListener('click', function () {
                        const productRecord = button.closest('.product-record');
                        const id = productRecord ? productRecord.id : null;

                        if (id) {
                            Swal.fire({
                                title: 'Are you sure?',
                                text: "Do you want to delete this item?",
                                icon: 'warning',
                                showCancelButton: true,
                                confirmButtonText: 'Yes, delete it!',
                                cancelButtonText: 'No, keep it',
                                customClass: {

                                    title: 'swal2-custom',
                                    htmlContainer: 'swal2-custom',
                                    confirmButton: 'swal2-custom',
                                    cancelButton: 'swal2-custom',
                                }
                            }).then((result) => {
                                if (result.isConfirmed) {
                                    document.getElementById(id).remove();
                                    Swal.fire({
                                        title: 'Deleted!',
                                        text: 'Your item has been deleted.',
                                        icon: 'success',
                                        customClass: {
                                            container: 'swal2-custom',
                                            title: 'swal2-custom',
                                            htmlContainer: 'swal2-custom',
                                            confirmButton: 'swal2-custom',
                                        }
                                    });
                                }
                            });
                        }
                    });
                }

                // Function to handle form submission


            </script>




            <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
            <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

            <script>
                const firebaseConfig = {
                    apiKey: "AIzaSyACe1lHeGGZFrFBvr1KGPnE7Gu_Ayhh9ZQ",
                    authDomain: "queen-s-footwear.firebaseapp.com",
                    databaseURL: "https://queen-s-footwear-default-rtdb.firebaseio.com",
                    projectId: "queen-s-footwear",
                    storageBucket: "queen-s-footwear.appspot.com",
                    messagingSenderId: "674887836342",
                    appId: "1:674887836342:web:381904961e23de7cd4bc17",
                    measurementId: "G-FN6G0NHL8V"
                };

                // Initialize Firebase
                firebase.initializeApp(firebaseConfig);

                document.getElementById('add-product-form').addEventListener('submit', function (event) {
                    event.preventDefault(); // Prevent default form submission behavior

                    // Show the preloader and disable the submit button
                    const submitButton = document.getElementById('sub-spin');
                    const submitTxt = document.getElementById('sub-txt');

                    submitTxt.classList.add('hidden');
                    submitButton.classList.remove('hidden');



                    // Collect input values
                    const formData = new FormData(this);
                    const product = {
                        "Brand-Name": formData.get('Brand-Name'),
                        "Product-Price": formData.get('Product-Price'),
                        "category": formData.get('category'),
                        "sale-amount": formData.get('sale-amount'),
                        "product-description": formData.get('product-description'),
                        "posted-at": new Date().toLocaleString(),
                        "product-photo": "", // Placeholder, will be set later
                        "product-photo2": "", // Placeholder, will be set later
                        "product-title": formData.get('product-title'),
                        "sizes": {} // Object to store sizes and colors
                    };

                    // Iterate through each product input set
                    document.querySelectorAll('.input-set').forEach((productSet) => {
                        const size = productSet.querySelector('input[name="size"]').value;
                        const colorname = productSet.querySelector('input[name="color-name"]').value;
                        const colorValue = productSet.querySelector('input[name="color-value"]').value;
                        const quantity = parseInt(productSet.querySelector('input[name="quantity"]').value); // Convert to integer
                        const imageUrl1 = productSet.querySelector('input[name="product-photo"]').value;
                        const imageUrl2 = productSet.querySelector('input[name="product-photo2"]').value;

                        // Set product photos if not already set
                        if (!product["product-photo"]) product["product-photo"] = imageUrl1;
                        if (!product["product-photo2"]) product["product-photo2"] = imageUrl2;

                        // Create the color object
                        const colorObject = {
                            "color-value": colorValue,
                            "img1": imageUrl1,
                            "img2": imageUrl2,
                            "qty": quantity
                        };

                        // Check if the size already exists in the product's sizes object
                        if (!product.sizes[size]) {
                            product.sizes[size] = {};
                        }

                        // Add the color object to the corresponding size
                        product.sizes[size][colorname] = colorObject;
                    });

                    // Initialize Firebase
                    const database = firebase.database();

                    // Reference to the products node in the database
                    const productsRef = database.ref('Products');

                    // Push the product object to Firebase
                    productsRef.push(product)
                        .then(() => {
                            Swal.fire({
                                title: 'Success!',
                                text: 'Form data submitted successfully.',
                                icon: 'success',
                                customClass: {
                                    container: 'swal2-custom',
                                    title: 'swal2-custom'
                                }
                            });
                            submitTxt.classList.remove('hidden');
                            submitButton.classList.add('hidden');
                        })
                        .catch(error => {
                            console.error('Error adding document: ', error);
                            Swal.fire({
                                title: 'Error!',
                                text: 'An error occurred while submitting the form.',
                                icon: 'error',
                                customClass: {
                                    container: 'swal2-custom',
                                    title: 'swal2-custom'
                                }
                            });
                        });
                });
            </script>

            <script>
                document.addEventListener("DOMContentLoaded", () => {
                    // Dark & Light toggle
                    document.querySelector(".day-night").addEventListener("change", () => {
                        const body = document.querySelector("body");
                        body.classList.toggle("dark");

                        if (body.classList.contains("dark")) {
                            setTimeout(() => {
                                body.classList.toggle("light");
                                setTimeout(() => body.classList.remove("light"), 10);
                            }, 5);
                        }

                        // Toggle input and label styles
                        const inputs = document.querySelectorAll("input");
                        const labels = document.querySelectorAll("label");

                        inputs.forEach(input => {
                            if (body.classList.contains("dark")) {
                                input.style.color = "#888888";
                                input.style.borderColor = "#8e8e8e80";
                            } else {
                                input.style.color = "";
                                input.style.borderColor = "";
                            }
                        });

                        labels.forEach(label => {
                            if (body.classList.contains("dark")) {
                                label.style.color = "#545454";
                            } else {
                                label.style.color = "";
                            }
                        });
                    });
                });
            </script>
            <script>
                function toggleDropdown() {
                    const dropdown = document.getElementById('dropdown');
                    dropdown.classList.toggle('active');
                }

                document.addEventListener("DOMContentLoaded", () => {
                    // Close dropdown if clicked outside
                    document.addEventListener('click', function (event) {
                        const profileIcon = document.querySelector('.profile-icon');
                        const dropdown = document.getElementById('dropdown');
                        if (!profileIcon.contains(event.target)) {
                            dropdown.classList.remove('active');
                        }
                    });



                });
            </script>

            <style>
                /* Default styles for inputs and labels */
                input {
                    color: inherit;
                    border-color: inherit;
                }

                label {
                    color: inherit;
                }

                /* Styles for dark mode */
                body.dark input {
                    color: #888888;
                    border-color: #8e8e8e80;


                }

                body.dark select {
                    color: #888888;
                    border-color: #8e8e8e80;
                    background: black;
                    ;
                }

                body.dark label {
                    color: #545454;
                    border-color: #8e8e8e80;
                }

                body.dark textarea {
                    color: #545454;
                    border-color: #8e8e8e80;
                }

                body.dark button {
                    color: white;
                    background-color: black;
                }

                body.dark .formbold-sub-btn {
                    color: white;
                    background-color: #6a64f1 !important;
                }

                body.dark .swal2-container.swal2-center.swal2-backdrop-show div {
                    background-color: #141414
                }

                body.dark .swal2-success-ring {
                    background: none !important;
                }

                body.dark .swal2-success-circular-line-left {
                    background-color: inherit !important;
                }

                body.dark .swal2-success-circular-line-right {
                    background-color: inherit !important;
                }

                body.dark .swal2-success-fix {
                    background-color: inherit !important;
                }
            </style>

        </div>
        </div>
    </main>
</body>

</html>
